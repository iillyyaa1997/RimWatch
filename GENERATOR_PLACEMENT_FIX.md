# üè† –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–¥–∞–Ω–∏—è –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–º–Ω–∞—Ç v0.8.4++ (2025-11-16)

## üö® –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: **"–ó–¥–∞–Ω–∏–µ –≤ –∑–∞–¥–Ω–∏–∏ –ø–æ—Å—Ç—Ä–æ–∏–ª–æ—Å—å, –ø—Ä—è–º –ø–æ —Ü–µ–Ω—Ç—Ä—É"**

–ú–æ–¥ —Å—Ç–∞–≤–∏–ª **–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –≤ —Ü–µ–Ω—Ç—Ä–µ –∂–∏–ª—ã—Ö –∫–æ–º–Ω–∞—Ç** (—Å–ø–∞–ª—å–Ω–∏, –∫—É—Ö–Ω–∏ –∏ —Ç.–¥.), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏—Ö –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã–º–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

---

## üîç –ü—Ä–∏—á–∏–Ω–∞ –±–∞–≥–∞

### –ö–æ–¥ –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```csharp
// Find ALL roofed, enclosed rooms
var powerRooms = map.regionGrid.AllRooms
    .Where(r => !r.PsychologicallyOutdoors && !r.IsHuge && r.ProperRoom)
    .ToList();

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: Prefer cells in the CENTER of the room
IntVec3 bestCell = candidates.OrderBy(c => c.DistanceTo(roomCenter)).First();
```

### –õ–æ–≥–∏–∫–∞ –±—ã–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è:

1. ‚ùå –ú–æ–¥ —Å—á–∏—Ç–∞–ª —á—Ç–æ **WoodFiredGenerator –î–û–õ–ñ–ï–ù** –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏
2. ‚ùå –ú–æ–¥ –±—Ä–∞–ª **–ª—é–±—É—é** –∫–æ–º–Ω–∞—Ç—É (—Å–ø–∞–ª—å–Ω—é, –∫—É—Ö–Ω—é, —Å–∫–ª–∞–¥)
3. ‚ùå –ú–æ–¥ —Å—Ç–∞–≤–∏–ª –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä **–≤ —Ü–µ–Ω—Ç—Ä** –∫–æ–º–Ω–∞—Ç—ã
4. ‚ùå –ú–æ–¥ –ø—Ä–æ–±–æ–≤–∞–ª indoor —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ **–ü–ï–†–í–´–ú**, –∞ –Ω–µ outdoor

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤ —Ü–µ–Ω—Ç—Ä–µ —Å–ø–∞–ª—å–Ω–∏! üíÄ

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç OUTDOOR —Ä–∞–∑–º–µ—â–µ–Ω–∏—è**

```csharp
// v0.8.4++: –ö–†–ò–¢–ò–ß–ù–û - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –í–°–ï–ì–î–ê —Å–Ω–∞—Ä—É–∂–∏, –µ—Å–ª–∏ –Ω–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∫–æ–º–Ω–∞—Ç—ã!
// Wood-fired generators CAN be outdoors in RimWorld - –æ–Ω–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç roof!

// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –ª–æ–∫–∞—Ü–∏—é –°–ù–ê–†–£–ñ–ò (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±)
location = LocationFinder.FindBestLocation(
    map,
    powerDef,
    LocationFinder.BuildingRole.Power,  // –î–∞—ë—Ç –±–æ–Ω—É—Å –¥–ª—è outdoor!
    logLevel
);

// –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–Ω–∞—Ä—É–∂–∏ –Ω–µ –Ω–∞—à–ª–∏ - –ø—Ä–æ–±—É–µ–º indoor (—É —Å—Ç–µ–Ω—ã!)
if (location == IntVec3.Invalid && isWoodPowered)
{
    location = FindLocationInPowerRoom(map, powerDef, logLevel);
}
```

### 2. **–†–∞–∑–º–µ—â–µ–Ω–∏–µ –£ –°–¢–ï–ù–´, –∞ –Ω–µ –≤ —Ü–µ–Ω—Ç—Ä–µ**

```csharp
// v0.8.4++: –ò—â–µ–º –º–µ—Å—Ç–æ –£ –°–¢–ï–ù–´ –∫–æ–º–Ω–∞—Ç—ã, –ù–ï –≤ —Ü–µ–Ω—Ç—Ä–µ!
var wallCandidates = room.Cells
    .Where(c => IsNearWall(map, c, room) && CanFitGeneratorAt(map, c, generatorSize, room))
    .ToList();

if (wallCandidates.Count > 0)
{
    // –ë–µ—Ä—ë–º —Å–ª—É—á–∞–π–Ω—É—é –∫–ª–µ—Ç–∫—É –û–ö–û–õ–û —Å—Ç–µ–Ω—ã (–Ω–µ –≤ —Ü–µ–Ω—Ç—Ä–µ!)
    IntVec3 bestCell = wallCandidates.RandomElement();
}
```

### 3. **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `IsNearWall`**

```csharp
private static bool IsNearWall(Map map, IntVec3 cell, Room room)
{
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ - —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç–µ–Ω–æ–π
    foreach (IntVec3 adjacentCell in GenAdj.CellsAdjacent8Way(new TargetInfo(cell, map)))
    {
        Building building = adjacentCell.GetFirstBuilding(map);
        
        // –ï—Å–ª–∏ —Å–æ—Å–µ–¥–Ω—è—è –∫–ª–µ—Ç–∫–∞ - —Å—Ç–µ–Ω–∞
        if (building != null && building.def.defName.Contains("Wall"))
            return true;
        
        // –ò–ª–∏ —ç—Ç–æ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Å—Ç–µ–Ω–∞
        if (building != null && building.def.building?.isNaturalRock == true)
            return true;
        
        // –ò–ª–∏ —Å–æ—Å–µ–¥–Ω—è—è –∫–ª–µ—Ç–∫–∞ –Ω–µ –≤ –∫–æ–º–Ω–∞—Ç–µ (–≥—Ä–∞–Ω–∏—Ü–∞)
        if (!room.Cells.Contains(adjacentCell))
            return true;
    }
    
    return false; // –í —Ü–µ–Ω—Ç—Ä–µ - –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç!
}
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–≤–∏–ª—Å—è **–≤ —Ü–µ–Ω—Ç—Ä–µ —Å–ø–∞–ª—å–Ω–∏/–∫—É—Ö–Ω–∏**
- ‚ùå –ö–æ–º–Ω–∞—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å **–Ω–µ–ø—Ä–∏–≥–æ–¥–Ω–æ–π** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚ùå –ú–æ–¥ –ø—Ä–æ–±–æ–≤–∞–ª indoor **–ü–ï–†–í–´–ú**

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ç–∞–≤—è—Ç—Å—è **–°–ù–ê–†–£–ñ–ò** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)
- ‚úÖ –ï—Å–ª–∏ indoor - —Ç–æ–ª—å–∫–æ **–£ –°–¢–ï–ù–´** –∫–æ–º–Ω–∞—Ç—ã
- ‚úÖ **–ù–ï –≤ —Ü–µ–Ω—Ç—Ä–µ** –∫–æ–º–Ω–∞—Ç—ã
- ‚úÖ Outdoor —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ü–ï–†–í–´–ú**

---

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑):

1. **OUTDOOR** (—Å–Ω–∞—Ä—É–∂–∏) - **–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±!**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `LocationFinder.BuildingRole.Power`
   - –î–∞—ë—Ç –±–æ–Ω—É—Å +10 –¥–ª—è outdoor –ª–æ–∫–∞—Ü–∏–π
   - –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ (wood, solar, wind)

2. **INDOOR —É —Å—Ç–µ–Ω—ã** (fallback –¥–ª—è –¥—Ä–æ–≤—è–Ω—ã—Ö)
   - –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ outdoor –Ω–µ –Ω–∞—à–ª–∏
   - –¢–æ–ª—å–∫–æ –¥–ª—è WoodFiredGenerator
   - **–£ –°–¢–ï–ù–´**, –Ω–µ –≤ —Ü–µ–Ω—Ç—Ä–µ!
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é `IsNearWall`

3. **–û—Ç–∫–∞–∑**
   - –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ –ø–æ–¥–æ—à—ë–ª
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è warning

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É —Å –º–æ–¥–æ–º
–ú–æ–¥ –¥–æ–ª–∂–µ–Ω:
- ‚úÖ –°—Ç–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã **—Å–Ω–∞—Ä—É–∂–∏** –±–∞–∑—ã
- ‚úÖ –ï—Å–ª–∏ indoor - **—É —Å—Ç–µ–Ω—ã**, –Ω–µ –≤ —Ü–µ–Ω—Ç—Ä–µ
- ‚úÖ **–ù–ï —Å—Ç–∞–≤–∏—Ç—å** –≤ —Ü–µ–Ω—Ç—Ä–µ —Å–ø–∞–ª–µ–Ω/–∫—É—Ö–æ–Ω—å

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
tail -f ~/Library/Logs/Ludeon\ Studios/RimWorld\ by\ Ludeon\ Studios/Player.log | grep -i "generator"
```

**–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:**
```
‚úÖ FindBestLocation: Found location for WoodFiredGenerator (outdoor preferred)
```

**–ò–õ–ò (–µ—Å–ª–∏ indoor):**
```
‚úÖ FindLocationInPowerRoom: Found location NEAR WALL at (X, Z)
```

**–ù–ï –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:**
```
‚ùå Found location in center of room  # –¢–∞–∫–æ–≥–æ –±–æ–ª—å—à–µ –Ω–µ—Ç!
```

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

### `Source/RimWatch/Automation/BuildingAutomation.cs`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –õ–∏–Ω–∏–∏ 931-968: –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
   - Outdoor –ü–ï–†–í–´–ô –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
   - Indoor fallback —Ç–æ–ª—å–∫–æ –¥–ª—è –¥—Ä–æ–≤—è–Ω—ã—Ö
2. –õ–∏–Ω–∏–∏ 1100-1149: `FindLocationInPowerRoom` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
   - –ò—â–µ—Ç –ª–æ–∫–∞—Ü–∏–∏ –£ –°–¢–ï–ù–´, –Ω–µ –≤ —Ü–µ–Ω—Ç—Ä–µ
3. –õ–∏–Ω–∏–∏ 1151-1182: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `IsNearWall`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∫–ª–µ—Ç–∫–∞ –æ–∫–æ–ª–æ —Å—Ç–µ–Ω—ã

---

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–û:
> "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏, –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–º–Ω–∞—Ç—ã"

### –ü–û–°–õ–ï:
> "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–Ω–∞—Ä—É–∂–∏! –ï—Å–ª–∏ –Ω–µ—Ç –º–µ—Å—Ç–∞ - —É —Å—Ç–µ–Ω—ã, –ù–ï –≤ —Ü–µ–Ω—Ç—Ä–µ!"

### –ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:
**Outdoor > Indoor —É —Å—Ç–µ–Ω—ã > –û—Ç–∫–∞–∑**

–ù–∏–∫–æ–≥–¥–∞ –±–æ–ª—å—à–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ —Ü–µ–Ω—Ç—Ä–µ –∂–∏–ª—ã—Ö –∫–æ–º–Ω–∞—Ç! üè†‚úÖ

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- **v0.8.4++** - Job spam fix (cooldowns, –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å —Å–ø–∞—Å–∞—Ç–µ–ª–µ–π)
- **v0.8.4++** - Generator placement fix (—ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)

---

**–í–µ—Ä—Å–∏—è:** v0.8.4++  
**–î–∞—Ç–∞:** 2025-11-16  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ  
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** RimWatch AI Team

