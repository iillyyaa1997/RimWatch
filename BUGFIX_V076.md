# RimWatch v0.7.6 - Critical Gameplay Fixes

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 10 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. ‚ö†Ô∏è Medical Emergency Response System

**–ü—Ä–æ–±–ª–µ–º–∞:** Colonists –Ω–µ —Å–ø–∞—Å–∞–ª–∏ —Ä–∞–Ω–µ–Ω—ã—Ö/—É–º–∏—Ä–∞—é—â–∏—Ö —Ç–æ–≤–∞—Ä–∏—â–µ–π, –æ—Å—Ç–∞–≤–ª—è—è –∏—Ö —É–º–∏—Ä–∞—Ç—å –Ω–∞ –º–µ—Å—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø–æ–º–æ—â–∏ `HandleMedicalEmergencies()`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ **2 —Å–µ–∫—É–Ω–¥—ã** (120 —Ç–∏–∫–æ–≤) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ downed/bleeding colonists
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ:
  - Downed colonists (–ø–æ—Ç–µ—Ä—è —Å–æ–∑–Ω–∞–Ω–∏—è)
  - Bleeding colonists (–∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ > 0.05/–¥–µ–Ω—å)
  - Critical health (< 30% –∑–¥–æ—Ä–æ–≤—å—è)
- ‚úÖ **EMERGENCY MODE**: –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç **Doctor priority 1** –≤—Å–µ–º —Å–ø–æ—Å–æ–±–Ω—ã–º –∫–æ–ª–æ–Ω–∏—Å—Ç–∞–º
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ç–æ —Ä–∞–Ω–µ–Ω –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å (DOWNED/BLEEDING/CRITICAL)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```csharp
Location: MedicalAutomation.cs
Method: HandleMedicalEmergencies()
Interval: 120 ticks (2 seconds)
Priority: Doctor = 1 (highest)
```

**–õ–æ–≥–∏:**
```
[RimWatch] üö® MEDICAL EMERGENCY! 1 colonist(s) need immediate help!
[RimWatch]    - Colonist: DOWNED (Health: 45%)
[RimWatch] üö® MedicalAutomation: Emergency mode activated! Assigned 2 colonists to Doctor (priority 1)
```

---

### 2. üèóÔ∏è Base Construction Improvements

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∞–∑–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Å—Ç—Ä–æ–∏—Ç—å—Å—è –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç—Ä–æ–µ–∫. –°–æ–æ–±—â–µ–Ω–∏—è: "RoomPlanner: Could not find location for Barracks room (6x8)"

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞: **3-60** (–±—ã–ª–æ 5-40) —Å —à–∞–≥–æ–º 3 –≤–º–µ—Å—Ç–æ 5
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω **fallback –º–µ—Ö–∞–Ω–∏–∑–º** –¥–ª—è –º–µ–Ω—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–æ–º–Ω–∞—Ç:
  - –ï—Å–ª–∏ –±–∞—Ä–∞–∫ 6x8 –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–±—É–µ—Ç 5x6
  - –ï—Å–ª–∏ —Å–ø–∞–ª—å–Ω—è 4x4 –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è ‚Üí –±—É–¥–µ—Ç –ø–æ–ø—ã—Ç–∫–∞ –º–µ–Ω—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- ‚úÖ –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω –æ—Ç–∫–∞–∑–∞

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```csharp
Location: RoomPlanner.cs
Method: PlanRoomAtBestLocation()
Search radius: 3 to 60 (step 3)
Fallback sizes: 6x8 ‚Üí 5x6 (barracks), 4x4 ‚Üí 3x3 (bedroom)
```

**–õ–æ–≥–∏:**
```
[RimWatch] RoomPlanner: Planning barracks 6x8 for early game
[RimWatch] RoomPlanner: Planning fallback barracks 5x6
```

---

### 3. üåô Work Schedule Management

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Å —É—á–µ—Ç–æ–º Night Owl trait. –°–æ–≤—ã —Å—Ç—Ä–∞–¥–∞–ª–∏ –¥–Ω–µ–º, –æ–±—ã—á–Ω—ã–µ –∫–æ–ª–æ–Ω–∏—Å—Ç—ã –Ω–µ –≤—ã—Å—ã–ø–∞–ª–∏—Å—å.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å `WorkScheduleAutomation.cs`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Night Owl trait
- ‚úÖ –†–∞–∑–ª–∏—á–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–ª–æ–Ω–∏—Å—Ç–æ–≤:

**Night Owl Schedule (–°–æ–≤—ã):**
- 22:00-6:00 (8 —á–∞—Å–æ–≤): **Work** (—Ä–∞–±–æ—Ç–∞ –Ω–æ—á—å—é)
- 6:00-14:00 (8 —á–∞—Å–æ–≤): **Sleep** (—Å–æ–Ω –¥–Ω–µ–º)
- 14:00-18:00 (4 —á–∞—Å–∞): **Anything** (–æ—Ç–¥—ã—Ö, –µ–¥–∞)
- 18:00-22:00 (4 —á–∞—Å–∞): **Work** (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–æ—á–∏)

**Normal Schedule (–û–±—ã—á–Ω—ã–µ):**
- 22:00-6:00 (8 —á–∞—Å–æ–≤): **Sleep** (—Å–æ–Ω –Ω–æ—á—å—é)
- 6:00-12:00 (6 —á–∞—Å–æ–≤): **Work** (—Ä–∞–±–æ—Ç–∞ —É—Ç—Ä–æ–º)
- 12:00-13:00 (1 —á–∞—Å): **Anything** (–æ–±–µ–¥)
- 13:00-18:00 (5 —á–∞—Å–æ–≤): **Work** (—Ä–∞–±–æ—Ç–∞ –¥–Ω–µ–º)
- 18:00-22:00 (4 —á–∞—Å–∞): **Anything** (—É–∂–∏–Ω, –æ—Ç–¥—ã—Ö)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
```csharp
Location: WorkScheduleAutomation.cs
Check interval: 18000 ticks (5 minutes)
Integrated in: RimWatchMapComponent.cs
Trait detection: DefDatabase<TraitDef>.GetNamedSilentFail("NightOwl")
```

**–õ–æ–≥–∏:**
```
[RimWatch] üåô WorkScheduleAutomation: Updated schedules - 2 normal colonists, 1 night owls
[RimWatch] WorkScheduleAutomation: Applied Night Owl schedule to Owl
[RimWatch] WorkScheduleAutomation: Applied Normal schedule to Bob
```

---

## üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å–ø–∞–ª–µ–Ω –∏ –∫–æ–ª–æ–Ω–∏—Å—Ç–æ–≤ (v0.7.5)
- ‚úÖ –ú–µ—Ç–æ–¥ `GetBedroomStats()` –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç:
  - –ö–æ–ª–æ–Ω–∏—Å—Ç–æ–≤ —Å –∫—Ä–æ–≤–∞—Ç—è–º–∏ / –±–µ–∑ –∫—Ä–æ–≤–∞—Ç–µ–π
  - –ö–æ–ª–æ–Ω–∏—Å—Ç–æ–≤ —Å –∫—Ä—ã—Ç—ã–º–∏ –∫—Ä–æ–≤–∞—Ç—è–º–∏ / –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–æ–∑–¥—É—Ö–µ
  - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ø–∞–ª—å–Ω–∏ –∏ –±–∞—Ä–∞–∫–∏
  - –°–ø–∞–ª—å–Ω–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
  - –î–µ—Ñ–∏—Ü–∏—Ç —Å–ø–∞–ª–µ–Ω

**–õ–æ–≥–∏:**
```
[RimWatch] ‚ö†Ô∏è Bedroom deficit detected! Colonists: 3 | With Beds: 0 | Roofed: 0 | Proper Bedrooms: 0 | Available Bedrooms: 0 (+ 0 building) | Deficit: 3
```

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–í—Å–µ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `RimWatchMapComponent.cs`:
- `HandleMedicalEmergencies()` - –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- `WorkScheduleAutomation.Tick()` - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –£–ª—É—á—à–µ–Ω–Ω—ã–π `RoomPlanner` - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `WorkScheduleAutomation.cs` - —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `MedicalAutomation.cs` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏
- `RoomPlanner.cs` - —Ä–∞—Å—à–∏—Ä–µ–Ω –ø–æ–∏—Å–∫ –ª–æ–∫–∞—Ü–∏–π, –¥–æ–±–∞–≤–ª–µ–Ω fallback
- `BuildingAutomation.cs` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `GetBedroomStats()`
- `RimWatchMapComponent.cs` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- `RimWatch.csproj` - –¥–æ–±–∞–≤–ª–µ–Ω WorkScheduleAutomation.cs
- `ROADMAP.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å v0.7.5 ‚Üí completed, –¥–æ–±–∞–≤–ª–µ–Ω v0.7.6
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –¥–æ 0.7.6

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå –†–∞–Ω–µ–Ω—ã–µ –∫–æ–ª–æ–Ω–∏—Å—Ç—ã —É–º–∏—Ä–∞–ª–∏ –±–µ–∑ –ø–æ–º–æ—â–∏
- ‚ùå –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–æ—Å—å –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –º–µ—Å—Ç–∞
- ‚ùå –°–æ–≤—ã —Å—Ç—Ä–∞–¥–∞–ª–∏ –¥–Ω–µ–º, –æ–±—ã—á–Ω—ã–µ –Ω–µ –≤—ã—Å—ã–ø–∞–ª–∏—Å—å

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –ø–æ–º–æ—â—å —Å–ø–∞—Å–∞–µ—Ç –∂–∏–∑–Ω–∏
- ‚úÖ –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–ª–æ–Ω–∏—Å—Ç–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø–∞–ª–µ–Ω –∏ –¥–µ—Ñ–∏—Ü–∏—Ç–∞

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd /Users/ilyavolkov/Workspace/RimWorld-mods/RimWatch
make deploy
```

–ú–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤:
```
~/Library/Application Support/Steam/steamapps/common/RimWorld/RimWorldMac.app/Mods/RimWatch/
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±–æ—Ä–∫–∏

- **Warnings:** 40 (nullable warnings - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- **Errors:** 0
- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** ~1.7 —Å–µ–∫—É–Ω–¥—ã
- **–ù–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~230

---

**–°–¥–µ–ª–∞–Ω–æ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è –≤–∞—à–µ–π –∫–æ–ª–æ–Ω–∏–∏! üö®‚ù§Ô∏è**

