# üöÄ RimWatch v0.7.1 - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–î–∞—Ç–∞:** 2025-11-07  
**–¢–∏–ø:** Bugfix Release

---

## üìã –û–±–∑–æ—Ä

–í–µ—Ä—Å–∏—è 0.7.1 —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è v0.7.0.

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### 1. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–µ–∏–∑—É—á–µ–Ω–Ω—ã—Ö –∑–¥–∞–Ω–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≤—Ç–æ–ø–∏–ª–æ—Ç —Ä–∞–∑–º–µ—â–∞–ª `SolarGenerator` (—Å–æ–ª–Ω–µ—á–Ω—É—é –ø–∞–Ω–µ–ª—å) –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏–∑—É—á–µ–Ω–∞ –ª–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è "Electricity".

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `ResearchProjectDef.IsFinished` –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –∑–¥–∞–Ω–∏–π
- –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤: —Å–Ω–∞—á–∞–ª–∞ `WoodFiredGenerator` (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π), –∑–∞—Ç–µ–º `SolarGenerator` (–µ—Å–ª–∏ –∏–∑—É—á–µ–Ω–æ)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `researchPrerequisites` –¥–ª—è –≤—Å–µ—Ö –∑–¥–∞–Ω–∏–π

**–ö–æ–¥:**
```csharp:BuildingAutomation.cs
// Start with wood-fired generator (no research required)
ThingDef powerDef = DefDatabase<ThingDef>.GetNamedSilentFail("WoodFiredGenerator");

// Check if solar is researched, if so prefer it
ResearchProjectDef solarResearch = DefDatabase<ResearchProjectDef>.GetNamedSilentFail("Electricity");
if (solarResearch != null && solarResearch.IsFinished)
{
    ThingDef solarDef = DefDatabase<ThingDef>.GetNamedSilentFail("SolarGenerator");
    if (solarDef != null) powerDef = solarDef;
}
```

---

### 2. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥—Ä–∞—Ñ—Ç –∫–æ–ª–æ–Ω–∏—Å—Ç–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≤—Ç–æ–ø–∏–ª–æ—Ç –¥—Ä–∞—Ñ—Ç–∏–ª –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–∏—Å—Ç–æ–≤ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –õ–Æ–ë–´–• –≤—Ä–∞–≥–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 100+ –∫–ª–µ—Ç–æ–∫.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –≤—Ä–∞–≥–∞
- –î—Ä–∞—Ñ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Ä–∞–≥ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö **30 –∫–ª–µ—Ç–æ–∫** –æ—Ç –ª—é–±–æ–≥–æ –∫–æ–ª–æ–Ω–∏—Å—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π undraft –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—Ä–∞–≥–æ–≤ –∏–ª–∏ –µ—Å–ª–∏ –æ–Ω–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è

**–ö–æ–¥:**
```csharp:DefenseAutomation.cs
const float DangerDistance = 30f; // Only draft if enemies within 30 tiles

// Calculate closest enemy distance
float closestDistance = float.MaxValue;
foreach (Pawn enemy in enemies)
{
    foreach (Pawn colonist in colonists)
    {
        float dist = enemy.Position.DistanceTo(colonist.Position);
        if (dist < closestDistance) closestDistance = dist;
        if (dist <= DangerDistance)
        {
            hasCloseEnemies = true;
            break;
        }
    }
}
```

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:**
```
‚öîÔ∏è DefenseAutomation: Drafted 2 colonists (enemies: 3, closest: 25 tiles)
‚úÖ DefenseAutomation: Undrafted 2 colonists (enemies too far (45 tiles))
```

---

### 3. –°–ø–∞–º –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–π –∂–∏–≤–æ—Ç–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≤—Ç–æ–ø–∏–ª–æ—Ç –ø–æ–º–µ—á–∞–ª –∂–∏–≤–æ—Ç–Ω—ã—Ö –Ω–∞ –ø—Ä–∏—Ä—É—á–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ –≤—Å–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –Ω–µ –±—ã–ª–∏ –ø–æ–º–µ—á–µ–Ω—ã.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã cooldown-—ã –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏:
  - **–û—Ö–æ—Ç–∞:** 30 —Å–µ–∫—É–Ω–¥ (1800 —Ç–∏–∫–æ–≤)
  - **–ü—Ä–∏—Ä—É—á–µ–Ω–∏–µ:** 60 —Å–µ–∫—É–Ω–¥ (3600 —Ç–∏–∫–æ–≤)
  - **–ó–∞–±–æ–π:** 30 —Å–µ–∫—É–Ω–¥ (1800 —Ç–∏–∫–æ–≤)
- –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

**–ö–æ–¥:**
```csharp:FarmingAutomation.cs
// Cooldowns for specific actions (in game ticks)
private static int lastHuntingTick = -9999;
private static int lastTamingTick = -9999;
private static int lastSlaughterTick = -9999;
private const int HuntingCooldown = 1800; // 30 seconds
private const int TamingCooldown = 3600; // 60 seconds
private const int SlaughterCooldown = 1800; // 30 seconds

// In each method:
int currentTick = Find.TickManager.TicksGame;
if (currentTick - lastTamingTick < TamingCooldown)
{
    return; // Too soon since last taming designation
}
```

---

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –†–∞–Ω—å—à–µ | –¢–µ–ø–µ—Ä—å |
|-----------|--------|--------|
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π** | –ù–µ—Ç | –î–∞, +1 –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –∑–¥–∞–Ω–∏–π |
| **–†–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –≤—Ä–∞–≥–æ–≤** | –ù–µ—Ç | –î–∞, O(n*m) –≥–¥–µ n=–≤—Ä–∞–≥–∏, m=–∫–æ–ª–æ–Ω–∏—Å—Ç—ã |
| **Cooldown –∂–∏–≤–æ—Ç–Ω—ã—Ö** | –ù–µ—Ç | –î–∞, -67% –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤ |

**–û–±—â–µ–µ –≤–ª–∏—è–Ω–∏–µ:** –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –¥–æ–±–∞–≤–ª—è–µ—Ç ~0.1ms –Ω–∞ —Ç–∏–∫ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤—Ä–∞–≥–æ–≤.

---

## üéÆ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –¢–µ—Å—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∑–¥–∞–Ω–∏–π:
```
1. –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É (tech level: Neolithic –∏–ª–∏ Tribal)
2. –î–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
3. ‚úÖ –û–ñ–ò–î–ê–ï–¢–°–Ø: WoodFiredGenerator (–∏–ª–∏ –Ω–∏—á–µ–≥–æ, –µ—Å–ª–∏ –Ω–µ—Ç –º–µ—Å—Ç–∞)
4. ‚ùå –ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨: SolarGenerator –±–µ–∑ –∏–∑—É—á–µ–Ω–∏—è "Electricity"
```

### 2. –¢–µ—Å—Ç –¥—Ä–∞—Ñ—Ç–∞:
```
1. –ü—Ä–∏–∑–≤–∞—Ç—å —Ä–µ–π–¥: Debug Actions > Incidents > Raid Enemy
2. –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤—Ä–∞–≥–æ–≤ –î–ê–õ–ï–ö–û –æ—Ç –±–∞–∑—ã (50+ –∫–ª–µ—Ç–æ–∫)
3. ‚úÖ –û–ñ–ò–î–ê–ï–¢–°–Ø: –ö–æ–ª–æ–Ω–∏—Å—Ç—ã –ù–ï –¥—Ä–∞—Ñ—Ç—è—Ç—Å—è, –≤ –ª–æ–≥–µ "enemies too far (X tiles)"
4. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤—Ä–∞–≥–æ–≤ –ë–õ–ò–ñ–ï –∫ –±–∞–∑–µ (<30 –∫–ª–µ—Ç–æ–∫)
5. ‚úÖ –û–ñ–ò–î–ê–ï–¢–°–Ø: –ö–æ–ª–æ–Ω–∏—Å—Ç—ã –¥—Ä–∞—Ñ—Ç—è—Ç—Å—è, –≤ –ª–æ–≥–µ "closest: X tiles"
```

### 3. –¢–µ—Å—Ç –ø—Ä–∏—Ä—É—á–µ–Ω–∏—è:
```
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –µ—Å—Ç—å –¥–∏–∫–∏–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –Ω–∞ –∫–∞—Ä—Ç–µ
2. –î–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç –ø–æ–º–µ—Ç–∏—Ç 2 –∂–∏–≤–æ—Ç–Ω—ã—Ö
3. ‚úÖ –û–ñ–ò–î–ê–ï–¢–°–Ø: –°–ª–µ–¥—É—é—â–µ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥
4. ‚ùå –ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨: –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
```

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `Source/RimWatch/Automation/BuildingAutomation.cs`
- `Source/RimWatch/Automation/DefenseAutomation.cs`
- `Source/RimWatch/Automation/FarmingAutomation.cs`

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è v0.7.1:
- [ ] –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ v0.7 (AutoPositionDefenders, AutoScheduleOperations, AutoTrade)
- [ ] –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö –¥–ª—è –ø—Ä–∏—Ä—É—á–µ–Ω–∏—è (—É—á–∏—Ç—ã–≤–∞—Ç—å wildness –∏ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è cooldown-–æ–≤ –≤ UI
- [ ] –ü–µ—Ä–µ–π—Ç–∏ –∫ v0.8 - "–£–º–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏"

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π](BUGFIX_V071.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](TESTING_GUIDE.md)
- [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](ROADMAP.md)

